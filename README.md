# Nexus Mail - 個人事業主向けスマートメールクライアント

個人事業主専用に設計されたスマートメールクライアント。購入履歴管理、重要メール識別、カレンダー統合を一つのアプリケーションで実現。

## ✨ 実装済み機能

### 📧 スマートメール管理
- ✅ **自動メール分類** - AI によるメール種別判定（通常メール / メルマガ / サービス通知）
- ✅ **メルマガ自動識別** - ニュースレター検出率 95% 以上
- ✅ **サービス通知管理** - GitHub、AWS、Stripe 等の通知を自動整理
- ✅ **スレッド表示** - Gmail 同様の会話スレッド表示
- ✅ **リアルタイム同期** - Gmail API によるリアルタイムデータ同期
- ✅ **HTMLメール完全対応** - iframe による安全な HTML レンダリング
- ✅ **画像プロキシ** - 外部画像の安全な表示

### ✉️ メール操作機能
- ✅ **メール返信** - スレッド内での返信機能
- ✅ **メール作成・送信** - 新規メール作成モーダル
- ✅ **メール転送** - ワンクリック転送機能
- ✅ **スター機能** - 重要メールのマーキング
- ✅ **アーカイブ機能** - メールの整理整頓
- ✅ **削除機能** - 不要メールの削除（確認ダイアログ付き）
- ✅ **一括操作** - 複数メール選択による一括処理
- ✅ **検索機能** - キーワード検索による絞り込み
- ✅ **未読/既読管理** - 既読・未読の切り替え
- ✅ **下書き保存** - 作成途中のメール保存
- ✅ **添付ファイル検出** - 添付ファイルの有無表示

### 💼 ビジネス支援機能（部分実装済み）
- ✅ **連絡先自動抽出** - メール署名から連絡先情報を自動抽出（バックエンド実装済み）
- ✅ **購入情報抽出** - EC サイトからの注文メール解析（バックエンド実装済み）
- ✅ **カレンダーイベント検出** - 会議招待の自動検出（バックエンド実装済み）

### 🎨 UI/UX 特徴
- ✅ **近未来的デザイン** - グラスモーフィズム & ネオングロー効果
- ✅ **ダークモード** - 目に優しいダークテーマ
- ✅ **レスポンシブ対応** - モバイル・タブレット・デスクトップ対応
- ✅ **カラーコーディング** - カテゴリ別の色分け
- ✅ **プログレッシブ読み込み** - スムーズなデータ表示

## 🚧 実装予定機能

### Phase 1: 購入管理システム強化（2024年Q1）
- 📊 **ダッシュボード** - 月別支出グラフ、カテゴリ別分析
- 💳 **領収書管理** - PDF/画像の自動保存と整理
- 📈 **支出レポート** - 月次/年次レポート生成
- 🏷️ **自動カテゴリ分類** - AI による支出カテゴリ判定
- 📤 **CSV/PDF エクスポート** - 会計ソフト連携

### Phase 2: AI アシスタント機能（2024年Q2）
- 🤖 **自動返信生成** - AI による返信文案の提案
- 📝 **要約機能** - 長文メールの自動要約
- 🎯 **優先度スコアリング** - 重要度の自動判定
- 🔔 **スマート通知** - 重要メールのみ通知
- 🗣️ **音声入力対応** - 音声による返信作成

### Phase 3: カレンダー統合（2024年Q2）
- 📅 **Google Calendar 完全同期**
- ⏰ **空き時間提案** - 会議可能時間の自動抽出
- 📍 **場所情報連携** - Google Maps 統合
- 🔄 **定期予定管理** - 繰り返しイベントの処理
- 📲 **リマインダー設定** - 予定前の自動通知

### Phase 4: マルチプラットフォーム展開（2024年Q3）
- 📱 **モバイルアプリ** - iOS/Android ネイティブアプリ
- 💻 **デスクトップアプリ** - Electron による Windows/Mac アプリ
- 🔗 **Slack/Teams 連携** - チャットツール統合
- 📊 **会計ソフト連携** - freee/マネーフォワード連携
- 🌐 **多言語対応** - 英語・中国語対応

### Phase 5: エンタープライズ機能（2024年Q4）
- 👥 **チーム共有** - メールの共有・コラボレーション
- 🔐 **高度なセキュリティ** - 2要素認証、監査ログ
- 📈 **分析ダッシュボード** - ビジネスインサイト
- 🤝 **CRM 連携** - Salesforce/HubSpot 統合
- 🏢 **組織階層対応** - 部署・チーム管理

## 🚀 技術スタック

### フロントエンド
- **React 18** + TypeScript
- **Tailwind CSS** - スタイリング
- **React Router** - ルーティング
- **React Query** - データフェッチング

### バックエンド
- **Node.js** + Express
- **TypeScript** - 型安全性
- **Passport.js** - 認証管理
- **Google APIs** (Gmail, OAuth)

### 認証
- **Google OAuth 2.0**
- **セッション管理**
- **セキュアなトークン処理**

## 📋 必要要件

- Node.js v18以上
- Google Cloud Platformアカウント
- Gmail API有効化
- OAuth 2.0認証情報

## 🛠️ インストール方法

### 1. リポジトリをクローン
```bash
git clone https://github.com/SR-YUKITAKAGI/-Nexus-Mail.git
cd -Nexus-Mail
```

### 2. 依存関係をインストール
```bash
# ルートディレクトリで
npm install

# クライアント側
cd client && npm install

# サーバー側
cd ../server && npm install
```

### 3. 環境変数を設定
```bash
# .envファイルを作成
cp .env.example .env
```

以下の情報を`.env`に設定：
```
GOOGLE_CLIENT_ID=your_client_id
GOOGLE_CLIENT_SECRET=your_client_secret
GOOGLE_REDIRECT_URI=http://localhost:3001/auth/google/callback
SESSION_SECRET=your_session_secret
CORS_ORIGIN=http://localhost:3000
```

### 4. 開発サーバーを起動

#### Claude Codeを使用する場合（推奨）
```bash
# プロジェクトディレクトリで以下のコマンドを実行
npm run dev
```

#### 手動で起動する場合
```bash
# サーバー側（ターミナル1）
cd server
npm run dev

# クライアント側（ターミナル2）
cd client
npm start
```

アプリケーションは以下のURLでアクセス可能：
- フロントエンド: http://localhost:3000
- バックエンドAPI: http://localhost:3001

## 🚀 Claude Codeでの簡単起動手順

1. **Claude Codeでプロジェクトを開く**
   ```
   プロジェクトフォルダをClaude Codeで開く
   ```

2. **起動コマンドを実行**
   ```
   「起動して」と入力するか、以下のコマンドを実行：
   npm run dev
   ```

3. **ブラウザでアクセス**
   ```
   http://localhost:3000 を開く
   ```

### トラブルシューティング

#### ポート3000が使用中の場合
```bash
# 使用中のプロセスを確認
netstat -tlnp | grep :3000

# プロセスを終了
kill [PID]
```

#### WSL環境での注意点
- Windows側のブラウザからアクセスする場合は `http://localhost:3000` を使用
- Google OAuth設定で `localhost` を使用することを確認

## 📁 プロジェクト構造

```
nexus-mail/
├── client/                 # Reactフロントエンド
│   ├── src/
│   │   ├── components/    # 再利用可能なUIコンポーネント
│   │   ├── pages/        # ページコンポーネント
│   │   │   ├── Dashboard.tsx    # ダッシュボード
│   │   │   ├── EmailsNew.tsx    # メール画面（Gmail連携）
│   │   │   ├── Purchases.tsx    # 購入管理
│   │   │   ├── Calendar.tsx     # カレンダー
│   │   │   └── Settings.tsx     # 設定
│   │   ├── context/      # 認証コンテキスト
│   │   └── index.css     # カスタムCSS（ネオン効果など）
│   └── package.json
├── server/                # Expressバックエンド
│   ├── src/
│   │   ├── routes/       # APIルート
│   │   │   ├── auth.ts   # 認証エンドポイント
│   │   │   └── emails.ts # メールAPI
│   │   ├── services/     # ビジネスロジック
│   │   │   ├── gmailService.ts      # Gmail API統合
│   │   │   └── newsletterDetector.ts # メルマガ判定
│   │   ├── middleware/   # ミドルウェア
│   │   └── config/       # 設定ファイル
│   └── package.json
└── README.md
```

## 🔒 セキュリティ機能

- **OAuth 2.0認証** - Googleアカウントで安全にログイン
- **セッション管理** - セキュアなクッキー処理
- **環境変数保護** - 認証情報の分離
- **CORS設定** - クロスオリジン攻撃防止

## 📊 実装済みAPI

### 認証
- `GET /auth/google` - Google OAuth開始
- `GET /auth/google/callback` - OAuth コールバック
- `POST /auth/logout` - ログアウト
- `GET /auth/me` - 現在のユーザー情報

### メール操作
- `GET /api/emails/threads` - メールスレッド取得
- `GET /api/emails/threads/:id` - 特定スレッド詳細
- `POST /api/emails/send` - メール送信（返信）

## 🧪 テスト方法

```bash
# Gmail連携テスト
1. http://localhost:3002 にアクセス
2. "Sign in with Google" をクリック
3. Googleアカウントでログイン
4. メールが表示されることを確認
```

## 📝 使い方

### 基本的な使い方

#### メール分類タブ
- **All** - すべてのメール
- **Primary** - 通常のビジネスメール
- **Newsletter** - メルマガ・マーケティングメール
- **Service** - サービス通知・システムメール

#### メール操作
- **返信** - メールを開いて「Reply」ボタン
- **転送** - メールを開いて「Forward」ボタン
- **新規作成** - 左上の ✏️ アイコン
- **スター** - メール横の ⭐ アイコン
- **アーカイブ** - 📦 アイコンでアーカイブ
- **削除** - 🗑️ アイコンで削除（確認あり）

#### 検索機能
- 上部の検索バーにキーワード入力
- Enter キーで検索実行
- 件名、送信者、本文から検索

#### 一括操作
1. ✓ アイコンでマルチセレクトモード有効化
2. チェックボックスで複数メール選択
3. 表示されるボタンで一括操作
   - Archive - 選択メールをアーカイブ
   - Delete - 選択メールを削除
   - Mark Read - 既読にする
   - Star - スターを付ける

### ショートカットキー（実装予定）
- `C` - 新規メール作成
- `R` - 返信
- `F` - 転送
- `S` - スター切り替え
- `E` - アーカイブ
- `Delete` - 削除
- `/` - 検索フォーカス

## 🤝 コントリビューション

1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/AmazingFeature`)
3. 変更をコミット (`git commit -m '素晴らしい機能を追加'`)
4. ブランチにプッシュ (`git push origin feature/AmazingFeature`)
5. プルリクエストを作成

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🙏 謝辞

- Google APIs (Gmail, OAuth)
- React / Node.jsコミュニティ
- Tailwind CSS
- すべての貢献者とテスター

## 📞 サポート

問題が発生した場合は、GitHubのIssueを作成してください。

---

**注意**: これは開発版です。本番環境での使用前に、すべてのセキュリティ設定を適切に構成してテストしてください。

🤖 Generated with [Claude Code](https://claude.ai/code)